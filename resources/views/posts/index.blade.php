<x-user-layout>

    <!-- Search Bar -->
    <form action="{{ route('posts.index') }}" method="GET" class="  mb-20 w-1/2 mx-auto my-10">
        <div class="flex items-center">
            <input type="text" name="search" id="search" placeholder="Rechercher un post" class="border-black border-2 flex-grow focus:ring-0 focus:border-red-600  rounded px-4 py-2 mr-4" value="{{ request()->search }}" />
            <button type="submit" class="bg-green-500 font-bold text-white px-4 py-2 rounded-lg shadow hover:bg-green-600"><!-- Yellow button -->
                <!-- You can replace this with your own search icon -->
                Rechercher
            </button>
        </div>
    </form>

    <button class="flex justify-center my-10 mx-auto">
        <a href="{{ route('posts.create') }}" class=" font-bold bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700">Ajouter un post</a>
    </button>

    <!-- Post Listing -->
    <ul class="grid sm:grid-cols-1 lg:grid-cols-1 2xl:grid-cols-1 gap-4 justify-center ">
        @foreach($posts as $post)
        <li class="w-full max-w-3xl mx-auto mt-1 p-8 rounded-md shadow-md bg-black ">
            <a class="block rounded-md shadow-md p-2 hover:shadow-lg hover:scale-105 transition bg-green-500 border-8 border-yellow-500 " href="{{ route('posts.show', $post) }}">
                <div class="relative overflow-hidden rounded-md aspect-w-1 aspect-h-1">
                    <img src="{{ asset('storage/' . $post->image_url) }}" alt="{{ $post->description }}" class="object-cover w-full h-full rounded-md ">
                </div>

                <div class="flex items-center justify-between mt-2 pt-2 border-t-2 border-yellow-500 ">
                    <div class="flex items-center mb-6">
                        <x-avatar class="h-12 w-12" :user="$post->user" />
                        <span class="font-bold text-black text-xl ml-2  ">{{ $post->user->name }}</span>
                        <span class="material-icons text-gray-500 ml-80 mr-1">access_time</span>
                        <span class="text-gray-500 text-sm">{{ $post->created_at->diffForHumans() }}</span>
                    </div>

                </div>
                <p class="text-black mt-1 ml-2 mb-2 ">{{ $post->description }}</p>
                <p class="text-gray-700"><span class="material-icons mr-2 align-bottom">place</span>{{ $post->localisation }}</p>
                <p class="text-gray-700">
                        <span class="material-icons mr-1 align-bottom">calendar_month</span>
                        {{ \Carbon\Carbon::parse($post->date)->locale('fr_BE')->isoFormat('D MMMM YYYY') }}
                    </p>


                @if($post->comments)
                <p class="text-gray-700 ml-2 mt-10">{{ $post->comments->count() }} <span class="material-icons ml-2  align-bottom">comment</span></p>
                @else
                <p class="text-gray-700 text-sm ml-2 mt-10">Aucun <span class="material-icons ml-2  ml-2 align-bottom"> </p>
                @endif

                <!-- Like/Unlike Buttons + Count -->
                @auth
                @if (!$post->likedBy(auth()->user()))
                <form action="{{ route('posts.like', $post) }}" method="post" class="flex justify-end">
                    @csrf
                    <button type="submit" class="flex items-center ml-2 mt-3 text-gray-600 text-2xl font-bold scale-150 hover:scale-180 mr-4 mb-4">{{ $post->likes->count() }}<svg fill="#000000" height="30px" width="40px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512.001 512.001" xml:space="preserve" stroke="#000000" stroke-width="9.216018">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="14.336028000000002">
                                <g>
                                    <g>
                                        <path d="M511.358,316.011c-1.295-3.558-4.38-6.164-8.104-6.846c-34.901-6.384-70.77-5.697-105.395,1.853 c4.957-6.216,9.732-12.592,14.293-19.109c38.558-55.068,61.79-119.338,67.185-185.863c0.306-3.775-1.411-7.428-4.513-9.6 c-3.103-2.173-7.123-2.538-10.564-0.959c-56.816,26.057-106.42,66.138-144.158,116.349c0-0.221,0.005-0.441,0.005-0.661 c0-71.573-18.984-141.811-54.901-203.121c-1.914-3.267-5.417-5.275-9.203-5.275c-3.787,0-7.29,2.008-9.203,5.275 c-35.918,61.311-54.902,131.549-54.902,203.121c0,0.221,0.005,0.44,0.005,0.661c-37.736-50.205-87.34-90.285-144.158-116.346 c-3.443-1.58-7.462-1.214-10.565,0.957c-3.102,2.173-4.82,5.826-4.514,9.601c5.395,66.525,28.627,130.795,67.183,185.862 c4.564,6.521,9.342,12.899,14.3,19.117c-34.652-7.556-70.51-8.24-105.4-1.859c-3.725,0.682-6.81,3.287-8.104,6.846 c-1.295,3.558-0.606,7.537,1.811,10.453c30.346,36.617,70.162,64.626,115.146,80.998c4.016,1.461,8.069,2.82,12.147,4.092 c-17.555,8.801-33.62,20.418-47.45,34.422c-2.66,2.694-3.693,6.598-2.714,10.256c0.98,3.658,3.826,6.522,7.478,7.524 c15.538,4.267,31.56,6.401,47.616,6.401c15.788,0,31.606-2.064,47.025-6.191c23.181-6.211,44.81-16.926,63.628-31.396v65.983 c0,5.891,4.775,10.667,10.667,10.667s10.667-4.775,10.667-10.667v-65.99c18.806,14.464,40.432,25.176,63.618,31.391 c15.412,4.13,31.226,6.194,47.014,6.194c16.053,0,32.082-2.134,47.627-6.403c3.652-1.003,6.498-3.867,7.479-7.524 c0.98-3.658-0.052-7.562-2.714-10.256c-13.819-13.994-29.878-25.606-47.436-34.411c4.078-1.271,8.13-2.631,12.144-4.093 c44.983-16.372,84.8-44.381,115.146-80.998C511.964,323.548,512.653,319.571,511.358,316.011z M124.898,387.416 c-35.245-12.827-67.037-33.401-92.941-60.011c36.488-3.693,73.611,0.842,108.567,13.343c23.715,24.102,50.29,44.709,79.341,61.517 c-17.619,0.726-35.266-0.445-52.761-3.532c-0.066-0.012-0.131-0.022-0.196-0.033C152.723,396.195,138.589,392.399,124.898,387.416 z M176.186,443.361c-20.752,5.555-42.318,6.877-63.349,3.962c15.741-12.251,33.765-21.493,53.064-27.165 c14.572,2.431,29.233,3.661,43.899,3.661c3.745,0,7.491-0.086,11.235-0.245C207.271,432.372,192.151,439.082,176.186,443.361z M154.035,324.08c-13.297-13.662-25.648-28.602-36.709-44.405c-32.701-46.705-53.719-100.41-61.335-156.361 c49.976,26.299,93.255,64.418,125.952,111.118c4.197,5.99,8.261,12.208,12.122,18.5c4.717,45.496,17.108,89.821,36.633,130.96 C202.558,367.627,176.867,347.598,154.035,324.08z M256.001,386.9c-28.036-53.955-42.773-114.308-42.773-175.724 c0-61.384,14.737-121.718,42.773-175.671c28.035,53.952,42.771,114.286,42.771,175.671 C298.773,272.593,284.037,332.945,256.001,386.9z M317.936,252.932c3.861-6.293,7.925-12.511,12.125-18.505 c32.7-46.703,75.977-84.822,125.95-111.115c-7.616,55.951-28.635,109.658-61.336,156.364 c-11.06,15.803-23.41,30.742-36.717,44.414c-22.811,23.494-48.499,43.521-76.65,59.795 C300.83,342.749,313.22,298.428,317.936,252.932z M399.153,447.313c-21.04,2.915-42.604,1.596-63.346-3.963 c-15.964-4.278-31.076-10.983-44.83-19.773c3.738,0.158,7.477,0.245,11.217,0.245c14.669,0,29.345-1.232,43.932-3.665 C365.418,425.838,383.43,435.079,399.153,447.313z M387.102,387.417c-13.732,5-27.919,8.807-42.172,11.315 c-17.521,3.091-35.183,4.263-52.805,3.537c29.072-16.822,55.652-37.432,79.352-61.522c34.91-12.498,72.055-17.037,108.565-13.342 C454.141,354.015,422.348,374.59,387.102,387.417z"></path>
                                    </g>
                                </g>
                            </g>
                            <g id="SVGRepo_iconCarrier">
                                <g>
                                    <g>
                                        <path d="M511.358,316.011c-1.295-3.558-4.38-6.164-8.104-6.846c-34.901-6.384-70.77-5.697-105.395,1.853 c4.957-6.216,9.732-12.592,14.293-19.109c38.558-55.068,61.79-119.338,67.185-185.863c0.306-3.775-1.411-7.428-4.513-9.6 c-3.103-2.173-7.123-2.538-10.564-0.959c-56.816,26.057-106.42,66.138-144.158,116.349c0-0.221,0.005-0.441,0.005-0.661 c0-71.573-18.984-141.811-54.901-203.121c-1.914-3.267-5.417-5.275-9.203-5.275c-3.787,0-7.29,2.008-9.203,5.275 c-35.918,61.311-54.902,131.549-54.902,203.121c0,0.221,0.005,0.44,0.005,0.661c-37.736-50.205-87.34-90.285-144.158-116.346 c-3.443-1.58-7.462-1.214-10.565,0.957c-3.102,2.173-4.82,5.826-4.514,9.601c5.395,66.525,28.627,130.795,67.183,185.862 c4.564,6.521,9.342,12.899,14.3,19.117c-34.652-7.556-70.51-8.24-105.4-1.859c-3.725,0.682-6.81,3.287-8.104,6.846 c-1.295,3.558-0.606,7.537,1.811,10.453c30.346,36.617,70.162,64.626,115.146,80.998c4.016,1.461,8.069,2.82,12.147,4.092 c-17.555,8.801-33.62,20.418-47.45,34.422c-2.66,2.694-3.693,6.598-2.714,10.256c0.98,3.658,3.826,6.522,7.478,7.524 c15.538,4.267,31.56,6.401,47.616,6.401c15.788,0,31.606-2.064,47.025-6.191c23.181-6.211,44.81-16.926,63.628-31.396v65.983 c0,5.891,4.775,10.667,10.667,10.667s10.667-4.775,10.667-10.667v-65.99c18.806,14.464,40.432,25.176,63.618,31.391 c15.412,4.13,31.226,6.194,47.014,6.194c16.053,0,32.082-2.134,47.627-6.403c3.652-1.003,6.498-3.867,7.479-7.524 c0.98-3.658-0.052-7.562-2.714-10.256c-13.819-13.994-29.878-25.606-47.436-34.411c4.078-1.271,8.13-2.631,12.144-4.093 c44.983-16.372,84.8-44.381,115.146-80.998C511.964,323.548,512.653,319.571,511.358,316.011z M124.898,387.416 c-35.245-12.827-67.037-33.401-92.941-60.011c36.488-3.693,73.611,0.842,108.567,13.343c23.715,24.102,50.29,44.709,79.341,61.517 c-17.619,0.726-35.266-0.445-52.761-3.532c-0.066-0.012-0.131-0.022-0.196-0.033C152.723,396.195,138.589,392.399,124.898,387.416 z M176.186,443.361c-20.752,5.555-42.318,6.877-63.349,3.962c15.741-12.251,33.765-21.493,53.064-27.165 c14.572,2.431,29.233,3.661,43.899,3.661c3.745,0,7.491-0.086,11.235-0.245C207.271,432.372,192.151,439.082,176.186,443.361z M154.035,324.08c-13.297-13.662-25.648-28.602-36.709-44.405c-32.701-46.705-53.719-100.41-61.335-156.361 c49.976,26.299,93.255,64.418,125.952,111.118c4.197,5.99,8.261,12.208,12.122,18.5c4.717,45.496,17.108,89.821,36.633,130.96 C202.558,367.627,176.867,347.598,154.035,324.08z M256.001,386.9c-28.036-53.955-42.773-114.308-42.773-175.724 c0-61.384,14.737-121.718,42.773-175.671c28.035,53.952,42.771,114.286,42.771,175.671 C298.773,272.593,284.037,332.945,256.001,386.9z M317.936,252.932c3.861-6.293,7.925-12.511,12.125-18.505 c32.7-46.703,75.977-84.822,125.95-111.115c-7.616,55.951-28.635,109.658-61.336,156.364 c-11.06,15.803-23.41,30.742-36.717,44.414c-22.811,23.494-48.499,43.521-76.65,59.795 C300.83,342.749,313.22,298.428,317.936,252.932z M399.153,447.313c-21.04,2.915-42.604,1.596-63.346-3.963 c-15.964-4.278-31.076-10.983-44.83-19.773c3.738,0.158,7.477,0.245,11.217,0.245c14.669,0,29.345-1.232,43.932-3.665 C365.418,425.838,383.43,435.079,399.153,447.313z M387.102,387.417c-13.732,5-27.919,8.807-42.172,11.315 c-17.521,3.091-35.183,4.263-52.805,3.537c29.072-16.822,55.652-37.432,79.352-61.522c34.91-12.498,72.055-17.037,108.565-13.342 C454.141,354.015,422.348,374.59,387.102,387.417z"></path>
                                    </g>
                                </g>
                            </g>
                        </svg></button>
                </form>
                @else
                <form action="{{ route('posts.unlike', $post) }}" method="post" class="flex justify-end">
                    @csrf
                    @method('DELETE')
                    <button type="submit" class="flex items-center ml-2 mt-3 text-gray-600 text-2xl font-bold scale-150 hover:scale-180 mr-4 mb-4">{{ $post->likes->count() }}<svg height="30px" width="40px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 511.467 511.467" xml:space="preserve">
                            <path style="fill:#000000;" d="M510.826,315.681c1.289,3.559,0.607,7.533-1.811,10.442c-30.315,36.58-70.092,64.562-115.026,80.918
	c-4.006,1.46-8.056,2.813-12.137,4.081c17.539,8.801,33.586,20.395,47.396,34.375c2.653,2.696,3.687,6.596,2.707,10.251
	c-0.98,3.655-3.825,6.51-7.47,7.512c-15.536,4.262-31.54,6.404-47.577,6.404c-15.77,0-31.572-2.067-46.969-6.191
	c-23.165-6.212-44.764-16.91-63.549-31.359v65.915c0,5.892-4.774,10.656-10.656,10.656c-5.882,0-10.656-4.763-10.656-10.656v-65.915
	c-18.796,14.46-40.406,25.168-63.56,31.37c-15.408,4.124-31.21,6.18-46.98,6.18c-16.037,0-32.041-2.131-47.566-6.393
	c-3.644-1.002-6.489-3.857-7.47-7.512c-0.98-3.655,0.053-7.555,2.706-10.251c13.82-13.991,29.867-25.594,47.406-34.385
	c-4.07-1.268-8.119-2.621-12.137-4.081c-44.934-16.356-84.711-44.338-115.026-80.918c-2.419-2.909-3.101-6.883-1.811-10.442
	c1.3-3.559,4.379-6.159,8.098-6.841c34.854-6.372,70.678-5.69,105.287,1.865c-4.944-6.212-9.718-12.584-14.278-19.105
	c-38.52-55.004-61.727-119.203-67.119-185.661c-0.298-3.772,1.417-7.427,4.507-9.59c3.101-2.174,7.118-2.536,10.56-0.959
	c56.762,26.031,106.31,66.075,144.009,116.23c0-0.224-0.011-0.448-0.011-0.661c0-71.498,18.967-141.665,54.844-202.913
	c1.918-3.261,5.413-5.264,9.196-5.264s7.278,2.003,9.196,5.264c35.877,61.248,54.844,131.414,54.844,202.913
	c0,0.213-0.011,0.437-0.011,0.661c37.699-50.166,87.258-90.199,144.009-116.23c3.442-1.577,7.459-1.215,10.56,0.959
	c3.09,2.163,4.806,5.818,4.507,9.59c-5.392,66.458-28.599,130.658-67.119,185.672c-4.55,6.51-9.324,12.872-14.278,19.084
	c34.588-7.544,70.422-8.226,105.287-1.854C506.447,309.523,509.526,312.122,510.826,315.681z M479.542,327.062
	c-36.474-3.687-73.576,0.842-108.452,13.33c-23.677,24.06-50.23,44.657-79.266,61.461c17.603,0.725,35.248-0.448,52.745-3.538
	c14.236-2.504,28.408-6.308,42.132-11.305C421.906,374.201,453.67,353.647,479.542,327.062z M394.266,279.389
	c32.67-46.66,53.661-100.311,61.269-156.21c-49.921,26.266-93.15,64.349-125.82,111.009c-4.188,5.978-8.258,12.19-12.105,18.477
	c-4.72,45.446-17.091,89.73-36.591,130.818c28.12-16.25,53.778-36.261,76.56-59.735C370.877,310.098,383.216,295.17,394.266,279.389
	z M335.458,442.887c20.714,5.552,42.26,6.873,63.283,3.964c-15.717-12.222-33.703-21.46-52.979-27.129
	c-14.566,2.429-29.228,3.655-43.879,3.655c-3.74,0-7.48-0.085-11.21-0.245C304.408,431.912,319.507,438.614,335.458,442.887z
	 M298.462,210.959c0-61.322-14.726-121.59-42.729-175.485c-28.003,53.896-42.729,114.163-42.729,175.485
	c0,61.354,14.726,121.643,42.729,175.539C283.736,332.602,298.462,272.314,298.462,210.959z M220.805,423.132
	c-3.74,0.16-7.48,0.245-11.22,0.245c-14.651,0-29.303-1.225-43.858-3.655c-19.276,5.658-37.284,14.896-53.011,27.129
	c21.013,2.92,42.558,1.598,63.283-3.953C191.95,438.625,207.059,431.922,220.805,423.132z M166.931,398.315
	c17.475,3.09,35.099,4.252,52.702,3.527c-29.015-16.782-55.568-37.369-79.256-61.45c-34.918-12.488-71.999-17.017-108.452-13.33
	c25.872,26.585,57.636,47.14,92.841,59.948c13.682,4.976,27.8,8.77,41.961,11.273C166.803,398.294,166.867,398.304,166.931,398.315z
	 M230.459,383.493c-19.51-41.098-31.881-85.372-36.602-130.828c-3.857-6.287-7.917-12.499-12.105-18.477
	c-32.659-46.65-75.899-84.733-125.82-110.998c7.608,55.888,28.599,109.539,61.269,156.188c11.05,15.791,23.389,30.72,36.676,44.359
	C176.68,347.232,202.35,367.243,230.459,383.493z" />
                            <g>
                                <path style="fill:#ff0000;" d="M371.09,340.392c34.875-12.488,71.978-17.017,108.452-13.33
		c-25.872,26.585-57.636,47.14-92.841,59.948c-13.724,4.997-27.896,8.801-42.132,11.305c-17.496,3.09-35.142,4.262-52.745,3.538
		C320.86,385.049,347.414,364.452,371.09,340.392z" />
                                <path style="fill:#ff0000;" d="M455.535,123.179c-7.608,55.899-28.599,109.549-61.269,156.21
		c-11.05,15.781-23.389,30.709-36.687,44.359c-22.781,23.474-48.44,43.485-76.56,59.735c19.5-41.088,31.871-85.372,36.591-130.818
		c3.847-6.287,7.917-12.499,12.105-18.477C362.385,187.528,405.614,149.445,455.535,123.179z" />
                                <path style="fill:#ff0000;" d="M398.741,446.851c-21.023,2.909-42.569,1.588-63.283-3.964
		c-15.951-4.273-31.05-10.975-44.785-19.755c3.729,0.16,7.47,0.245,11.21,0.245c14.651,0,29.313-1.225,43.879-3.655
		C365.038,425.39,383.024,434.629,398.741,446.851z" />
                                <path style="fill:#ff0000;" d="M255.734,35.474c28.003,53.896,42.729,114.163,42.729,175.485
		c0,61.354-14.726,121.643-42.729,175.539c-28.003-53.896-42.729-114.184-42.729-175.539
		C213.005,149.637,227.731,89.369,255.734,35.474z" />
                                <path style="fill:#ff0000;" d="M209.585,423.377c3.74,0,7.48-0.085,11.22-0.245c-13.746,8.791-28.855,15.493-44.806,19.766
		c-20.725,5.551-42.27,6.873-63.283,3.953c15.728-12.233,33.735-21.471,53.011-27.129
		C180.282,422.151,194.933,423.377,209.585,423.377z" />
                                <path style="fill:#ff0000;" d="M219.633,401.842c-17.603,0.725-35.227-0.437-52.702-3.527c-0.064-0.011-0.128-0.021-0.202-0.032
		c-14.161-2.504-28.28-6.297-41.961-11.273c-35.206-12.808-66.97-33.362-92.841-59.948c36.452-3.687,73.534,0.842,108.452,13.33
		C164.064,364.473,190.618,385.059,219.633,401.842z" />
                                <path style="fill:#ff0000;" d="M193.857,252.665c4.72,45.456,17.091,89.73,36.602,130.828
		c-28.109-16.25-53.778-36.261-76.581-59.756c-13.287-13.639-25.626-28.567-36.676-44.359c-32.67-46.65-53.661-100.3-61.269-156.188
		c49.921,26.266,93.161,64.349,125.82,110.998C185.94,240.166,190,246.378,193.857,252.665z" />
                            </g>
                        </svg></button>
                </form>
                @endif
                @endauth
            </a>
        </li>
        @endforeach
    </ul>


    <div class="mt-8">
        {{ $posts->links() }}
    </div>

</x-user-layout>